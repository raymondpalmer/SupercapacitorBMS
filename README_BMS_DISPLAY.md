# BMS Display System - HDMIæ¥å£ç”µæ± ç®¡ç†ç³»ç»Ÿæ˜¾ç¤ºç•Œé¢

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºç”µæ± ç®¡ç†ç³»ç»Ÿ(BMS)è®¾è®¡çš„ç°ä»£åŒ–HDMIæ˜¾ç¤ºç•Œé¢ï¼Œå…·æœ‰CarPlay Ultraé£æ ¼çš„è®¾è®¡å’Œæµç•…çš„å……ç”µåŠ¨ç”»ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¨ ç°ä»£åŒ–UIè®¾è®¡
- **CarPlay Ultraé£æ ¼**: é‡‡ç”¨è‹¹æœCarPlayçš„è®¾è®¡è¯­è¨€ï¼Œç®€æ´ç¾è§‚
- **æ¸å˜èƒŒæ™¯**: æ·±è‰²ä¸»é¢˜é…åˆè“è‰²æ¸å˜ï¼Œä¸“ä¸šæ„Ÿåè¶³
- **åœ†è§’è®¾è®¡**: ç°ä»£åŒ–çš„åœ†è§’å…ƒç´ ï¼Œç¬¦åˆå½“å‰è®¾è®¡è¶‹åŠ¿

### âš¡ å……ç”µåŠ¨ç”»æ•ˆæœ
- **é—ªç”µå›¾æ ‡**: å……ç”µæ—¶æ˜¾ç¤ºåŠ¨æ€é—ªç”µå›¾æ ‡
- **è„‰å†²ç¯**: å¤šå±‚è„‰å†²ç¯åŠ¨ç”»ï¼Œå¢å¼ºè§†è§‰æ•ˆæœ
- **é€æ˜åº¦å˜åŒ–**: å¹³æ»‘çš„é€æ˜åº¦åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

### ğŸ“Š ç”µæ± ä¿¡æ¯æ˜¾ç¤º
- **å®æ—¶æ•°æ®**: æ˜¾ç¤ºç”µæ± ç”µé‡ã€ç”µå‹ã€ç”µæµã€æ¸©åº¦
- **çŠ¶æ€æŒ‡ç¤º**: å……ç”µ/æ”¾ç”µçŠ¶æ€å®æ—¶æ˜¾ç¤º
- **é¢œè‰²ç¼–ç **: æ ¹æ®ç”µé‡çŠ¶æ€æ˜¾ç¤ºä¸åŒé¢œè‰²ï¼ˆç»¿è‰²/æ©™è‰²/çº¢è‰²ï¼‰

### ğŸ–¥ï¸ å¤šç§æ˜¾ç¤ºæ¨¡å¼
- **HDMIæ¨¡å¼**: ä¸“ä¸ºHDMIæ˜¾ç¤ºå™¨ä¼˜åŒ–çš„å…¨å±æ¨¡å¼
- **å…¨å±æ¨¡å¼**: ä¸»æ˜¾ç¤ºå™¨å…¨å±æ˜¾ç¤º
- **é¢„è§ˆæ¨¡å¼**: çª—å£åŒ–æ˜¾ç¤ºï¼Œä¾¿äºå¼€å‘å’Œè°ƒè¯•

## ç³»ç»Ÿè¦æ±‚

### è½¯ä»¶ä¾èµ–
- Ubuntu 20.04+ / ROS2 Humble+
- Qt5 æˆ– Qt6
- X11 æ˜¾ç¤ºç³»ç»Ÿ
- Python 3.8+

### ç¡¬ä»¶è¦æ±‚
- æ”¯æŒHDMIè¾“å‡ºçš„æ˜¾å¡
- è‡³å°‘2GBæ˜¾å­˜
- 1920x1080æˆ–æ›´é«˜åˆ†è¾¨ç‡

## å®‰è£…è¯´æ˜

### 1. å®‰è£…ç³»ç»Ÿä¾èµ–
```bash
# å®‰è£…Qtå¼€å‘åŒ…
sudo apt update
sudo apt install qt6-base-dev qt6-base-dev-tools
# æˆ–è€…Qt5
sudo apt install qtbase5-dev qt5-qmake

# å®‰è£…X11å·¥å…·
sudo apt install x11-xserver-utils

# å®‰è£…VNCæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼Œç”¨äºè¿œç¨‹æŸ¥çœ‹ï¼‰
sudo apt install x11vnc
```

### 2. æ„å»ºé¡¹ç›®
```bash
# è¿›å…¥å·¥ä½œç©ºé—´
cd ~/ros2_ws

# æ„å»ºé¡¹ç›®
colcon build --packages-select bms_can_bridge_cpp

# è®¾ç½®ç¯å¢ƒ
source install/setup.bash
```

## ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨BMSæ˜¾ç¤ºç³»ç»Ÿ

#### æ–¹æ³•1: ç›´æ¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶
```bash
# é¢„è§ˆæ¨¡å¼ï¼ˆçª—å£åŒ–ï¼‰
./build/bms_can_bridge_cpp/bms_display_system --preview

# å…¨å±æ¨¡å¼
./build/bms_can_bridge_cpp/bms_display_system --fullscreen

# HDMIæ¨¡å¼
./build/bms_can_bridge_cpp/bms_display_system --hdmi
```

#### æ–¹æ³•2: ä½¿ç”¨ROS2 launchæ–‡ä»¶
```bash
# é¢„è§ˆæ¨¡å¼
ros2 launch bms_can_bridge_cpp bms_display.launch.py preview:=true

# HDMIæ¨¡å¼
ros2 launch bms_can_bridge_cpp bms_display.launch.py hdmi:=true

# å…¨å±æ¨¡å¼
ros2 launch bms_can_bridge_cpp bms_display.launch.py fullscreen:=true
```

#### æ–¹æ³•3: ä½¿ç”¨è™šæ‹Ÿæ˜¾ç¤ºå™¨è„šæœ¬
```bash
# äº¤äº’å¼è™šæ‹Ÿæ˜¾ç¤ºå™¨
python3 scripts/virtual_display.py --interactive

# å‘½ä»¤è¡Œæ¨¡å¼
python3 scripts/virtual_display.py --mode preview --resolution 1920x1080

# å¯åŠ¨VNCæœåŠ¡å™¨
python3 scripts/virtual_display.py --mode preview --vnc
```

### è™šæ‹ŸHDMIæ˜¾ç¤ºå™¨

å¦‚æœæ²¡æœ‰ç‰©ç†HDMIæ˜¾ç¤ºå™¨ï¼Œå¯ä»¥ä½¿ç”¨è™šæ‹Ÿæ˜¾ç¤ºå™¨è¿›è¡Œé¢„è§ˆï¼š

```bash
# ä½¿ç”¨bashè„šæœ¬
chmod +x scripts/virtual_hdmi_display.sh
./scripts/virtual_hdmi_display.sh

# ä½¿ç”¨Pythonè„šæœ¬
chmod +x scripts/virtual_display.py
./scripts/virtual_display.py --interactive
```

## ç•Œé¢è¯´æ˜

### ä¸»è¦åŒºåŸŸ
1. **çŠ¶æ€æ **: æ˜¾ç¤ºæ—¶é—´ã€æ—¥æœŸå’Œè¿æ¥çŠ¶æ€
2. **ç”µæ± å›¾æ ‡**: å¤§å‹ç”µæ± å›¾æ ‡ï¼Œæ˜¾ç¤ºç”µé‡ç™¾åˆ†æ¯”
3. **ä¿¡æ¯é¢æ¿**: æ˜¾ç¤ºè¯¦ç»†çš„ç”µæ± å‚æ•°
4. **CarPlayåŒºåŸŸ**: åº•éƒ¨åŠ¨æ€æ³¢æµªæ•ˆæœ

### é¢œè‰²æ–¹æ¡ˆ
- **ä¸»è‰²è°ƒ**: iOSè“è‰² (#007AFF)
- **è¾…åŠ©è‰²**: ç´«è‰² (#5856D6)
- **å¼ºè°ƒè‰²**: æ©™è‰² (#FF9500)
- **èƒŒæ™¯è‰²**: æ·±ç°è‰² (#1C1C1E)
- **æ–‡å­—è‰²**: ç™½è‰² (#FFFFFF)

### åŠ¨ç”»æ•ˆæœ
- **å……ç”µåŠ¨ç”»**: é—ªç”µå›¾æ ‡ + è„‰å†²ç¯
- **æ³¢æµªæ•ˆæœ**: åº•éƒ¨åŠ¨æ€æ³¢æµª
- **æ·¡å…¥æ·¡å‡º**: å¹³æ»‘çš„é€æ˜åº¦å˜åŒ–

## å¼€å‘è¯´æ˜

### é¡¹ç›®ç»“æ„
```
bms_can_bridge_cpp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ bms_display_ui.h          # UIå¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ bms_display_ui.cpp        # UIå®ç°
â”‚   â”œâ”€â”€ bms_display_main.cpp      # ä¸»ç¨‹åº
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ virtual_hdmi_display.sh   # Bashè™šæ‹Ÿæ˜¾ç¤ºå™¨è„šæœ¬
â”‚   â””â”€â”€ virtual_display.py        # Pythonè™šæ‹Ÿæ˜¾ç¤ºå™¨è„šæœ¬
â”œâ”€â”€ launch/
â”‚   â””â”€â”€ bms_display.launch.py     # ROS2å¯åŠ¨æ–‡ä»¶
â””â”€â”€ CMakeLists.txt                 # æ„å»ºé…ç½®
```

### è‡ªå®šä¹‰å¼€å‘
- ä¿®æ”¹é¢œè‰²æ–¹æ¡ˆ: ç¼–è¾‘ `bms_display_ui.cpp` ä¸­çš„é¢œè‰²å®šä¹‰
- æ·»åŠ æ–°åŠ¨ç”»: åœ¨ `setupAnimations()` å‡½æ•°ä¸­æ·»åŠ æ–°çš„åŠ¨ç”»
- ä¿®æ”¹å¸ƒå±€: è°ƒæ•´ `paintEvent()` ä¸­çš„ç»˜åˆ¶å‡½æ•°

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Qtåº“æœªæ‰¾åˆ°
```bash
# ç¡®ä¿å®‰è£…äº†Qtå¼€å‘åŒ…
sudo apt install qt6-base-dev
# æˆ–è€…
sudo apt install qtbase5-dev
```

#### 2. æ˜¾ç¤ºæƒé™é—®é¢˜
```bash
# ç¡®ä¿X11æƒé™æ­£ç¡®
xhost +local:
```

#### 3. è™šæ‹Ÿæ˜¾ç¤ºå™¨åˆ›å»ºå¤±è´¥
```bash
# æ£€æŸ¥xrandræ˜¯å¦å¯ç”¨
xrandr --version

# æ‰‹åŠ¨æ·»åŠ æ˜¾ç¤ºå™¨æ¨¡å¼
xrandr --addmode <display> 1920x1080_60.00
```

#### 4. å­—ä½“æ˜¾ç¤ºé—®é¢˜
```bash
# å®‰è£…ç³»ç»Ÿå­—ä½“
sudo apt install fonts-sf-pro
# æˆ–è€…ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ä½“
```

### è°ƒè¯•æ¨¡å¼
```bash
# å¯ç”¨è°ƒè¯•è¾“å‡º
export QT_LOGGING_RULES="qt.qpa.*=true"
./build/bms_can_bridge_cpp/bms_display_system --preview
```

## æ€§èƒ½ä¼˜åŒ–

### æ¸²æŸ“ä¼˜åŒ–
- å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ: ç¡®ä¿æ˜¾å¡é©±åŠ¨æ­£ç¡®å®‰è£…
- å‡å°‘é‡ç»˜é¢‘ç‡: è°ƒæ•´å®šæ—¶å™¨é—´éš”
- ä¼˜åŒ–åŠ¨ç”»: ä½¿ç”¨ç¼“åŠ¨å‡½æ•°å‡å°‘è®¡ç®—é‡

### å†…å­˜ç®¡ç†
- åŠæ—¶é‡Šæ”¾èµ„æº: åœ¨ææ„å‡½æ•°ä¸­æ¸…ç†
- é¿å…å†…å­˜æ³„æ¼: ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†Qtå¯¹è±¡

## æ‰©å±•åŠŸèƒ½

### æœªæ¥è®¡åˆ’
- [ ] æ”¯æŒè§¦æ‘¸å±æ“ä½œ
- [ ] æ·»åŠ æ›´å¤šåŠ¨ç”»æ•ˆæœ
- [ ] æ”¯æŒå¤šè¯­è¨€ç•Œé¢
- [ ] é›†æˆå®æ—¶æ•°æ®æº
- [ ] æ·»åŠ é…ç½®ç•Œé¢

### è´¡çŒ®æŒ‡å—
æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨BSD-3-Clauseè®¸å¯è¯ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é¡¹ç›®Issues: GitHub Issues
- é‚®ç®±: you@example.com

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºç³»ç»Ÿï¼Œå®é™…éƒ¨ç½²æ—¶è¯·æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´å‚æ•°å’Œé…ç½®ã€‚
